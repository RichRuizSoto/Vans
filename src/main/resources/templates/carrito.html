<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Carrito de Compras - Vans</title>
    <link rel="stylesheet" href="estilos.css">
</head>
<body>
<header>
    <nav class="navbar">
        <div class="logo">
            <img src="img/logo-vans.png" alt="Vans Logo">
        </div>
        <ul class="nav-links">
            <li><a th:href="@{/}">Inicio</a></li>
            <li><a href="#">Hombres</a></li>
            <li><a href="#">Mujeres</a></li>
            <li><a th:href="@{/catalogo}">Catálogo</a></li>
            <li><a th:href="@{/carrito}">Carrito</a></li>
            <li><a th:href="@{/historial}">Historial</a></li>
            <li><a th:href="@{/login}">Iniciar sesión</a></li>
        </ul>
    </nav>
</header>

<main class="carrito-container">
    <h2>Tu Carrito de Compras</h2>

    <table class="tabla-carrito">
        <thead>
        <tr>
            <th>Producto</th>
            <th>Precio</th>
            <th>Cantidad</th>
            <th>Total</th>
            <th>Acción</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="producto, iterStat : ${carrito}">
            <td th:text="${producto.nombre}">Nombre Producto</td>
            <td th:text="${producto.precio}">0.00</td>
            <td>1</td> <!-- Puedes cambiarlo a producto.cantidad si manejas cantidades -->
            <td th:text="${producto.precio}">0.00</td>
            <td>
                <form th:action="@{'/carrito/eliminar/' + ${iterStat.index}}" method="post">
                    <button type="submit">Eliminar</button>
                </form>
            </td>
        </tr>
        <tr th:if="${carrito == null or #lists.isEmpty(carrito)}">
            <td colspan="5" style="text-align: center;">Tu carrito está vacío</td>
        </tr>
        </tbody>
    </table>

    <div class="resumen">
        <h3>Total a pagar: ₡<span th:text="${total}">0.00</span></h3>

        <form method="post" action="/carrito/confirmar" style="margin-top: 20px;">
            <label for="usuarioId">Selecciona el usuario para asociar la compra:</label>
            <select name="usuarioId" id="usuarioId" required>
                <option value="" disabled selected>Selecciona un usuario</option>
                <option th:each="usuario : ${usuarios}"
                        th:value="${usuario.id}"
                        th:text="${usuario.nombre}">Usuario</option>
            </select>
            <br><br>
            <button type="submit">Confirmar Compra</button>
        </form>

        <form method="post" action="/carrito/cancelar" style="margin-top: 10px;">
            <button type="submit">Cancelar Carrito</button>
        </form>
    </div>
</main>
</body>
</html>